<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CASA0023 Learning Diary - 6&nbsp; Week 6: Classification I</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week7.html" rel="next">
<link href="./week5.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6: Classification I</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CASA0023 Learning Diary</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week 1: Getting started with remote sensing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week 2: Portfolio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3: Corrections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week 4: Policy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week5.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5: Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6: Classification I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week7: Classification II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week8: Temperature</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="toc-section-number">6.1</span>  Summary</a>
  <ul class="collapse">
  <li><a href="#machine-learning-in-remote-sensing" id="toc-machine-learning-in-remote-sensing" class="nav-link" data-scroll-target="#machine-learning-in-remote-sensing"><span class="toc-section-number">6.1.1</span>  Machine learning in remote sensing</a></li>
  <li><a href="#gee-classification" id="toc-gee-classification" class="nav-link" data-scroll-target="#gee-classification"><span class="toc-section-number">6.1.2</span>  GEE classification</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="toc-section-number">6.2</span>  Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="toc-section-number">6.3</span>  Reflection</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6: Classification I</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">6.1</span> Summary</h2>
<p>This week I learned how to build a model to solve classification problem.</p>
<section id="machine-learning-in-remote-sensing" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="machine-learning-in-remote-sensing"><span class="header-section-number">6.1.1</span> Machine learning in remote sensing</h3>
<ul>
<li><p>supervised learning:</p>
<ul>
<li><p>regression problem:</p>
<ul>
<li><p>regression tree</p></li>
<li><p>support vector regression</p></li>
</ul></li>
<li><p>classification problem</p>
<ul>
<li><p>decision tree</p></li>
<li><p>random forest</p></li>
<li><p>boosting and Xgboost</p></li>
</ul></li>
</ul></li>
<li><p>unsupervised learning:</p>
<ul>
<li>clustering: K-means and GMM</li>
</ul></li>
</ul>
<section id="decision-tree" class="level4" data-number="6.1.1.1">
<h4 data-number="6.1.1.1" class="anchored" data-anchor-id="decision-tree"><span class="header-section-number">6.1.1.1</span> Decision tree</h4>
<p>The algorithm works by recursively partitioning the feature space into smaller regions using a series of binary splits. At each split, the algorithm selects the feature that best separates the data into the target classes or predicts the target variable. The split is made based on the value of the selected feature, and the data is split into two or more subgroups based on the selected threshold value. This process is repeated until a stopping criterion is met, such as a minimum number of observations in a subgroup, or no further improvement in the classification or regression accuracy.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/decision tree.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Mechanism of decision tree. Source: <a href="https://www.javatpoint.com/machine-learning-decision-tree-classification-algorithm">JavaTPoint</a></figcaption><p></p>
</figure>
</div>
<p>Classification algorithm and Regression Tree (CART) is a typical algorithm to calculate the entropy when each branch generates. the classic function is gini index.</p>
<p><span class="math inline">\(Entropy(s)= -P(yes)log2 P(yes)- P(no) log2 P(no)\)</span></p>
<p><span class="math inline">\(Gini Index= 1- ∑^{j}_{j=0}P_j^2\)</span></p>
<p>To visualize a decision tree, we can use graphviz, this tool can convert .dot file (describe area of root, node) into graph. Here, in this case, when entropy is equal to 0, the tree has one leaf.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/t.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">An example of decision tree visualized by Graphviz</figcaption><p></p>
</figure>
</div>
</section>
<section id="random-forest" class="level4" data-number="6.1.1.2">
<h4 data-number="6.1.1.2" class="anchored" data-anchor-id="random-forest"><span class="header-section-number">6.1.1.2</span> Random forest</h4>
<p>Random forest is an ensemble learning method that combines multiple decision trees to make more accurate predictions.</p>
<p>The random forest algorithm works by constructing multiple decision trees during training time and outputting the class that is the mode of the classes (classification) or mean prediction (regression) of the individual trees. Each tree is constructed using a random subset of the training data and a random subset of the features. This helps to prevent overfitting and reduces variance in the predictions.</p>
<p>First step is how do use limited dataset to generate different inputs of each decision tree, this process is called bootstrap sampling. the algorithm will compare the mean and standard deviation of each sampling data to ensure they are not the same sampling data.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/Bagging.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Bootstrap sampling</figcaption><p></p>
</figure>
</div>
<p>Then, the sampling data will be input into different decision tree, finally, the output may be the average value of result or a majority voting mechanism.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/rf.webp" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Flow of random forest</figcaption><p></p>
</figure>
</div>
<p>There are also some potential drawbacks of the random forest algorithm, which includes its computational complexity and its tendency to perform poorly on datasets with imbalanced classes. However, with proper tuning and optimization, these limitations can be overcome.</p>
</section>
<section id="xgboost" class="level4" data-number="6.1.1.3">
<h4 data-number="6.1.1.3" class="anchored" data-anchor-id="xgboost"><span class="header-section-number">6.1.1.3</span> Xgboost</h4>
<p>Before introducing Xgboost it is boosting, both boosting and random forests are essemble learning algorithms that use multiple decision trees. When processing the output of multiple decision trees, boosting calculates the residuals of each tree and minimizes them by constructing a loss function for the residuals to obtain the optimal solution.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/loss function.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Mechanism of Xgboost</figcaption><p></p>
</figure>
</div>
<p>Then, how to get the minimum value of loss function, Xgboost uses gradient boosting machine (GBM) and make improvement.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/benefit.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Benefits of Xgboost</figcaption><p></p>
</figure>
</div>
<p>In general, the relationship between the algorithms below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/rf2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Relationship</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="gee-classification" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="gee-classification"><span class="header-section-number">6.1.2</span> GEE classification</h3>
<p>This is a workflow of my training, testing and validation process, I use Lhasa city, Tibet as point of interests.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/frame.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Workflow</figcaption><p></p>
</figure>
</div>
<section id="training" class="level4" data-number="6.1.2.1">
<h4 data-number="6.1.2.1" class="anchored" data-anchor-id="training"><span class="header-section-number">6.1.2.1</span> Training</h4>
<p>I selected several typical land types in Lhasa city because the accuracy of model depends on the accuracy of labels, so the classification of the various different land types had to be accurate in order for the resulting model to work better.</p>
<ul>
<li><p>urban area: (with high density) one community of Lhasa city center, Lhasa financial center, universities</p></li>
<li><p>water: the Namucuo in northern Lhasa, Lhasa river</p></li>
<li><p>wetland: Lalu Wetland National Nature Reserve (sample many times)</p></li>
<li><p>bare earth: Zayaba Monastery, mountain area</p></li>
<li><p>forest: Lhasa Nimu National Forest Park,</p></li>
<li><p>ice land: the top of those mountains</p></li>
<li><p>urban area: (with low density) living area, villages around the city center</p></li>
</ul>
</section>
<section id="testing" class="level4" data-number="6.1.2.2">
<h4 data-number="6.1.2.2" class="anchored" data-anchor-id="testing"><span class="header-section-number">6.1.2.2</span> Testing</h4>
<ul>
<li>Example 1</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/lhasa1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Lhasa city center classification</figcaption><p></p>
</figure>
</div>
<p>As the picture shows, this is the centre of Lhasa, the red coloured part is the Lhasa River flowing through the city, the blue is the main city with a high population density, while the white part in the upper left corner is a larger wetland, the periphery of the city centre is bare ground.</p>
<ul>
<li>Example 2</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/lhasa2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Namucuo and mountain</figcaption><p></p>
</figure>
</div>
<p>In this example, the red part represents the water part and the blue part is the mountain peak and is above 6,000m, therefore the peaks are covered in snow all year round. Comparing this with the map, I found that the area is the Nyingchi Tanggula range, where you can see that the ridges run from north-east to south-west, and the green parts are mixed coniferous forests, located on the mountainsides and at the foot of the mountains. The thin blue line in the bottom right corner is the Qinghai-Tibet Highway, which runs along the Nyingchi Tanggula Range.</p>
<p>However, this method depends on the accuracy of the training data I selected before, I introduced another more accurate method.</p>
</section>
<section id="adjustment" class="level4" data-number="6.1.2.3">
<h4 data-number="6.1.2.3" class="anchored" data-anchor-id="adjustment"><span class="header-section-number">6.1.2.3</span> Adjustment</h4>
<p>Initially with 7 categories, I found the accuracy of the validation dataset to be around 80% and the OOB error to be around 17%, independent of both how many datasets were divided into training sets and how many trees were used in random forest. I realized it is possible to reduce the categories.</p>
<p>When combining urban_high and urban_low, I saw a significant increase in those indicators, based on this finding, I then combine the forest and wetland land types, and compare the indicators with ice land and without ice land.</p>
<ul>
<li><p>out of bag error estimate: 7.56%</p></li>
<li><p>Training overall accuracy: 98.91%</p></li>
<li><p>Validation overall accuracy: 92.38%</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/pixel1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">4 categories</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/pixel2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Lhasa city center under 4 categories</figcaption><p></p>
</figure>
</div>
<p>The results show that the indicators divided into four categories are better than the five categories. although 3 categories performs better than 4 categories, urban features and river features are not well identified and therefore 3 categories are not used.</p>
<ul>
<li><p>urban area</p></li>
<li><p>water area</p></li>
<li><p>bare earth</p></li>
<li><p>wetland</p></li>
</ul>
<p>It is true that increasing the number of trees in a decision tree can help to improve accuracy, and increasing from 100 to 300 trees can improve metrics such as accuracy, but after increasing to 500 trees there is no significant change.</p>
</section>
</section>
</section>
<section id="application" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="application"><span class="header-section-number">6.2</span> Application</h2>
<ul>
<li>Tehran Province study</li>
</ul>
<p>Nasiri et al.&nbsp;(2020) used the Google Earth Engine (GEE) cloud computing platform to create cloud-free Sentinel-2 and Landsat-8 time series for Tehran Province (Iran) up to 2020 and to find out how the two synthetic methods and the spectro-temporal metrics extracted from the satellite time series affect the machine learning classifier ability to generate accurate LULC maps. They used two synthetic methods, seasonal composites and percentile indicators, for defining four datasets based on satellite time series, vegetation indices and topographic layers. A random forest classifier was used for Land Use and Land Cover (LULC) classification and to identify the most important variables. Accuracy assessments showed that Sentinel2 outperformed the Landsat8 spectral time metrics at the overall and category level.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/arch.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Workflow of study</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/res.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">LULC maps resulting from the four datasets based on the S-2 and L-8 spectral–temporal metrics. Source: <a href="https://www.mdpi.com/2072-4292/14/9/1977">Land Use and Land Cover Mapping Using Sentinel-2, Landsat-8 Satellite Images</a></figcaption><p></p>
</figure>
</div>
<p>Both S-2 and L-8 show phenological variation in the LULC categories, particularly on agricultural land and woodland, is effectively provided by seasonal composites.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/res2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Spring, summer and autumn compasison between L-8 and S-2 R:(NIR), G:Green, B:Blue</figcaption><p></p>
</figure>
</div>
<p>This picture is a comparison between S-2 and L-8 to distinguish different land cover between bare and artificial land, grassland and harvested farmland. It can be shown that boundary of different land types S-2 identified is better than L-8.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="docs/image/res3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">D-1, D-2 is Sentinel2 seasonal composites and percentile metrics, while D-3, D-4 is Landsat 8</figcaption><p></p>
</figure>
</div>
<p>The study concluded that the MODIS time series and the extracted spectro-temporal metrics are a reliable source of accurate LULC mapping. However, some differences between datasets were observed. For example, the LULC maps generated from the S-2 time series were more accurate than those generated from the L-8 time series. Comparisons between the combination methods showed that the seasonal median combination outperformed the percentile index in both the S-2 and L-8 time series. The results demonstrate the validity of the vegetation indices, particularly NDVI and NDBI, and the S-2 red border, with respect to the importance of the variables.</p>
</section>
<section id="reflection" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">6.3</span> Reflection</h2>
<p>In this week, I know how to select my own ROI, process graphics and classify different land type based on decision tree and random forest.</p>
<p>There are several problems I found in process:</p>
<p>Hyperparameter tuning was crucial when training the classifier, as I couldn’t decide exactly how many decision trees I needed to make the classifier work well when training the model, and I kept trying to manually tune it throughout the process, and should probably try looking for hyperparameters, such as grid search.</p>
<p>In practice, I found that if I defined too many types, the accuracy of the test set was consistently below 90% and the out-of-bag error was above 10%. Although the training set performed well, this suggested that I had too many categories, which led to underfitting, and I merged some categories to improve the accuracy of the test set and reduce the out-of-bag error y. I am not sure if this is a good idea. I’m not quite sure if this is reasonable</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week5.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5: Google Earth Engine</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week7.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week7: Classification II</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>